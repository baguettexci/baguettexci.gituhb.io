---
title: Predicting Fare on NYC Taxi
date: 2018-10-28
tags: 
  - machine learning
  - data science
header:
  image: ""
excerpt: "Machine Learning, Data Science"
mathjax: "true"
---



## 1) Setup
### Load packages
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
```

### Load & Viewing the Data
```python
pd.set_option('display.float_format', lambda x: '%.3f' % x)
nyc = pd.read_csv("C:/Users/Weasel/Desktop/NYC Taxi/train.csv", nrows = 3_000_000, parse_dates = ['pickup_datetime']).drop(columns = 'key')
nyc
```
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>fare_amount</th>
      <th>pickup_datetime</th>
      <th>pickup_longitude</th>
      <th>pickup_latitude</th>
      <th>dropoff_longitude</th>
      <th>dropoff_latitude</th>
      <th>passenger_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>4.500</td>
      <td>2009-06-15 17:26:21</td>
      <td>-73.844</td>
      <td>40.721</td>
      <td>-73.842</td>
      <td>40.712</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>16.900</td>
      <td>2010-01-05 16:52:16</td>
      <td>-74.016</td>
      <td>40.711</td>
      <td>-73.979</td>
      <td>40.782</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>5.700</td>
      <td>2011-08-18 00:35:00</td>
      <td>-73.983</td>
      <td>40.761</td>
      <td>-73.991</td>
      <td>40.751</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.700</td>
      <td>2012-04-21 04:30:42</td>
      <td>-73.987</td>
      <td>40.733</td>
      <td>-73.992</td>
      <td>40.758</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5.300</td>
      <td>2010-03-09 07:51:00</td>
      <td>-73.968</td>
      <td>40.768</td>
      <td>-73.957</td>
      <td>40.784</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5</th>
      <td>12.100</td>
      <td>2011-01-06 09:50:45</td>
      <td>-74.001</td>
      <td>40.732</td>
      <td>-73.973</td>
      <td>40.758</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7.500</td>
      <td>2012-11-20 20:35:00</td>
      <td>-73.980</td>
      <td>40.752</td>
      <td>-73.974</td>
      <td>40.765</td>
      <td>1</td>
    </tr>
    <tr>
      <th>7</th>
      <td>16.500</td>
      <td>2012-01-04 17:22:00</td>
      <td>-73.951</td>
      <td>40.774</td>
      <td>-73.990</td>
      <td>40.751</td>
      <td>1</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9.000</td>
      <td>2012-12-03 13:10:00</td>
      <td>-74.006</td>
      <td>40.727</td>
      <td>-73.993</td>
      <td>40.732</td>
      <td>1</td>
    </tr>
    <tr>
      <th>9</th>
      <td>8.900</td>
      <td>2009-09-02 01:11:00</td>
      <td>-73.981</td>
      <td>40.734</td>
      <td>-73.992</td>
      <td>40.758</td>
      <td>2</td>
    </tr>
    <tr>
      <th>10</th>
      <td>5.300</td>
      <td>2012-04-08 07:30:50</td>
      <td>-73.996</td>
      <td>40.737</td>
      <td>-73.981</td>
      <td>40.734</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11</th>
      <td>5.500</td>
      <td>2012-12-24 11:24:00</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>3</td>
    </tr>
    <tr>
      <th>12</th>
      <td>4.100</td>
      <td>2009-11-06 01:04:03</td>
      <td>-73.992</td>
      <td>40.745</td>
      <td>-73.983</td>
      <td>40.745</td>
      <td>2</td>
    </tr>
    <tr>
      <th>13</th>
      <td>7.000</td>
      <td>2013-07-02 19:54:00</td>
      <td>-74.005</td>
      <td>40.729</td>
      <td>-74.009</td>
      <td>40.711</td>
      <td>1</td>
    </tr>
    <tr>
      <th>14</th>
      <td>7.700</td>
      <td>2011-04-05 17:11:05</td>
      <td>-74.002</td>
      <td>40.738</td>
      <td>-73.998</td>
      <td>40.723</td>
      <td>2</td>
    </tr>
    <tr>
      <th>15</th>
      <td>5.000</td>
      <td>2013-11-23 12:57:00</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16</th>
      <td>12.500</td>
      <td>2014-02-19 07:22:00</td>
      <td>-73.986</td>
      <td>40.760</td>
      <td>-73.989</td>
      <td>40.737</td>
      <td>1</td>
    </tr>
    <tr>
      <th>17</th>
      <td>5.300</td>
      <td>2009-07-22 16:08:00</td>
      <td>-73.981</td>
      <td>40.738</td>
      <td>-73.994</td>
      <td>40.728</td>
      <td>1</td>
    </tr>
    <tr>
      <th>18</th>
      <td>5.300</td>
      <td>2010-07-07 14:52:00</td>
      <td>-73.970</td>
      <td>40.785</td>
      <td>-73.959</td>
      <td>40.783</td>
      <td>1</td>
    </tr>
    <tr>
      <th>19</th>
      <td>4.000</td>
      <td>2014-12-06 20:36:22</td>
      <td>-73.980</td>
      <td>40.752</td>
      <td>-73.979</td>
      <td>40.755</td>
      <td>1</td>
    </tr>
    <tr>
      <th>20</th>
      <td>10.500</td>
      <td>2010-09-07 13:18:00</td>
      <td>-73.985</td>
      <td>40.748</td>
      <td>-73.978</td>
      <td>40.762</td>
      <td>1</td>
    </tr>
    <tr>
      <th>21</th>
      <td>11.500</td>
      <td>2013-02-12 12:15:46</td>
      <td>-73.958</td>
      <td>40.779</td>
      <td>-73.961</td>
      <td>40.759</td>
      <td>1</td>
    </tr>
    <tr>
      <th>22</th>
      <td>4.500</td>
      <td>2009-08-06 18:17:23</td>
      <td>-73.992</td>
      <td>40.771</td>
      <td>-73.985</td>
      <td>40.764</td>
      <td>1</td>
    </tr>
    <tr>
      <th>23</th>
      <td>4.900</td>
      <td>2010-12-06 12:29:00</td>
      <td>-74.001</td>
      <td>40.747</td>
      <td>-73.987</td>
      <td>40.741</td>
      <td>1</td>
    </tr>
    <tr>
      <th>24</th>
      <td>6.100</td>
      <td>2009-12-10 15:37:00</td>
      <td>-73.970</td>
      <td>40.757</td>
      <td>-73.981</td>
      <td>40.760</td>
      <td>1</td>
    </tr>
    <tr>
      <th>25</th>
      <td>7.300</td>
      <td>2011-06-21 16:15:00</td>
      <td>-73.992</td>
      <td>40.754</td>
      <td>-73.977</td>
      <td>40.774</td>
      <td>3</td>
    </tr>
    <tr>
      <th>26</th>
      <td>6.500</td>
      <td>2011-02-07 20:01:00</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>1</td>
    </tr>
    <tr>
      <th>27</th>
      <td>4.500</td>
      <td>2011-06-28 19:47:00</td>
      <td>-73.989</td>
      <td>40.760</td>
      <td>-73.986</td>
      <td>40.758</td>
      <td>3</td>
    </tr>
    <tr>
      <th>28</th>
      <td>9.300</td>
      <td>2012-05-04 06:11:20</td>
      <td>-73.989</td>
      <td>40.691</td>
      <td>-74.004</td>
      <td>40.726</td>
      <td>1</td>
    </tr>
    <tr>
      <th>29</th>
      <td>4.500</td>
      <td>2013-08-11 00:52:00</td>
      <td>-73.981</td>
      <td>40.738</td>
      <td>-73.981</td>
      <td>40.730</td>
      <td>2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2999970</th>
      <td>10.000</td>
      <td>2013-01-03 19:04:55</td>
      <td>-73.991</td>
      <td>40.751</td>
      <td>-73.984</td>
      <td>40.771</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999971</th>
      <td>10.900</td>
      <td>2009-09-26 19:34:07</td>
      <td>-74.002</td>
      <td>40.740</td>
      <td>-73.988</td>
      <td>40.728</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999972</th>
      <td>9.300</td>
      <td>2010-09-16 22:58:00</td>
      <td>-73.988</td>
      <td>40.779</td>
      <td>-73.961</td>
      <td>40.778</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999973</th>
      <td>6.500</td>
      <td>2011-07-31 13:51:24</td>
      <td>-73.989</td>
      <td>40.741</td>
      <td>-73.998</td>
      <td>40.724</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999974</th>
      <td>12.100</td>
      <td>2012-05-09 14:29:08</td>
      <td>-73.972</td>
      <td>40.758</td>
      <td>-73.988</td>
      <td>40.751</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999975</th>
      <td>23.000</td>
      <td>2013-01-25 10:06:25</td>
      <td>-73.945</td>
      <td>40.788</td>
      <td>-73.990</td>
      <td>40.737</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999976</th>
      <td>14.000</td>
      <td>2014-06-06 23:14:43</td>
      <td>-73.989</td>
      <td>40.749</td>
      <td>-73.947</td>
      <td>40.772</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999977</th>
      <td>5.300</td>
      <td>2009-10-08 08:39:51</td>
      <td>-73.979</td>
      <td>40.748</td>
      <td>-73.988</td>
      <td>40.749</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999978</th>
      <td>16.500</td>
      <td>2013-04-21 01:19:54</td>
      <td>-74.002</td>
      <td>40.740</td>
      <td>-73.961</td>
      <td>40.806</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999979</th>
      <td>10.500</td>
      <td>2014-11-13 22:45:00</td>
      <td>-73.976</td>
      <td>40.745</td>
      <td>-73.976</td>
      <td>40.745</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999980</th>
      <td>5.000</td>
      <td>2009-04-01 23:09:33</td>
      <td>-74.004</td>
      <td>40.738</td>
      <td>-73.995</td>
      <td>40.745</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999981</th>
      <td>9.300</td>
      <td>2011-11-03 13:09:30</td>
      <td>-73.968</td>
      <td>40.763</td>
      <td>-73.981</td>
      <td>40.733</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999982</th>
      <td>16.500</td>
      <td>2012-08-10 23:35:00</td>
      <td>-73.961</td>
      <td>40.715</td>
      <td>-73.991</td>
      <td>40.750</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999983</th>
      <td>9.000</td>
      <td>2014-01-10 09:54:00</td>
      <td>-73.968</td>
      <td>40.763</td>
      <td>-73.977</td>
      <td>40.765</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999984</th>
      <td>8.000</td>
      <td>2014-02-28 20:29:39</td>
      <td>-73.989</td>
      <td>40.749</td>
      <td>-73.982</td>
      <td>40.771</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999985</th>
      <td>11.000</td>
      <td>2014-04-29 11:16:56</td>
      <td>-73.982</td>
      <td>40.753</td>
      <td>-74.008</td>
      <td>40.736</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999986</th>
      <td>10.000</td>
      <td>2014-07-30 15:44:00</td>
      <td>-73.984</td>
      <td>40.744</td>
      <td>-74.006</td>
      <td>40.740</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999987</th>
      <td>4.000</td>
      <td>2014-12-02 14:57:00</td>
      <td>-73.977</td>
      <td>40.790</td>
      <td>-73.981</td>
      <td>40.784</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999988</th>
      <td>6.100</td>
      <td>2010-01-30 10:11:37</td>
      <td>-73.972</td>
      <td>40.791</td>
      <td>-73.956</td>
      <td>40.803</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999989</th>
      <td>4.100</td>
      <td>2011-03-19 03:38:00</td>
      <td>-73.962</td>
      <td>40.771</td>
      <td>-73.953</td>
      <td>40.771</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999990</th>
      <td>10.900</td>
      <td>2012-01-31 06:42:27</td>
      <td>-73.976</td>
      <td>40.753</td>
      <td>-74.009</td>
      <td>40.714</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999991</th>
      <td>8.100</td>
      <td>2012-03-29 14:48:57</td>
      <td>-73.959</td>
      <td>40.814</td>
      <td>-73.941</td>
      <td>40.824</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999992</th>
      <td>6.500</td>
      <td>2013-06-09 20:29:00</td>
      <td>-73.961</td>
      <td>40.761</td>
      <td>-73.947</td>
      <td>40.774</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2999993</th>
      <td>10.500</td>
      <td>2014-01-09 14:02:54</td>
      <td>-74.007</td>
      <td>40.742</td>
      <td>-73.983</td>
      <td>40.768</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999994</th>
      <td>11.500</td>
      <td>2015-06-07 02:38:08</td>
      <td>-73.988</td>
      <td>40.759</td>
      <td>-73.953</td>
      <td>40.776</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999995</th>
      <td>16.100</td>
      <td>2011-12-24 02:53:00</td>
      <td>-73.985</td>
      <td>40.779</td>
      <td>-73.980</td>
      <td>40.718</td>
      <td>6</td>
    </tr>
    <tr>
      <th>2999996</th>
      <td>10.000</td>
      <td>2012-09-20 04:34:35</td>
      <td>-73.986</td>
      <td>40.768</td>
      <td>-73.947</td>
      <td>40.749</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999997</th>
      <td>10.000</td>
      <td>2013-05-03 22:09:00</td>
      <td>-73.990</td>
      <td>40.741</td>
      <td>-73.975</td>
      <td>40.755</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2999998</th>
      <td>17.500</td>
      <td>2013-11-20 07:28:00</td>
      <td>-73.957</td>
      <td>40.762</td>
      <td>-74.011</td>
      <td>40.702</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2999999</th>
      <td>7.500</td>
      <td>2014-01-01 17:00:00</td>
      <td>-73.928</td>
      <td>40.770</td>
      <td>-73.923</td>
      <td>40.756</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>3000000 rows × 7 columns</p>


## 2) Exploratory data analysis
### View the shape of the dataset



<img src="{{ site.url }}{{ site.baseurl }}/images/NYC Taxi/.png" alt="">
```python

```
{% highlight text %}

{% endhighlight %} 
